# RISC-V 5-Stage Pipelined Processor (Verilog)

## **Overview**

This repository contains a **5-stage pipelined RISC-V** processor written in Verilog, following the standard IF/ID/EX/MEM/WB architecture. It is suitable for simulation and educational purposes, and features a modular design for easy expansion.

## **Features**

- **5-stage Pipeline:** IF, ID, EX, MEM, WB
- **Hazard Detection:** Stalling on load-use hazards
- **Register File:** 32 registers, 32 bits each
- **Memory:** 256x32 word-aligned data/instruction memory
- **Simulation Ready:** Testbench and waveform output included
- **Extensible:** Modular for enhancements (forwarding, prediction, etc.)

## **File Descriptions**

| **File Name**           | **Description**                                                                              |
|-------------------------|----------------------------------------------------------------------------------------------|
| `alu.v`                 | Implements the Arithmetic Logic Unit (ALU) for performing arithmetic and logical operations.  |
| `control_unit.v`        | Generates control signals for the processor based on the opcode and instruction type.         |
| `data_memory.v`         | Handles data memory (RAM) for load and store instructions in the MEM stage.                  |
| `ex_mem.v`              | Pipeline register connecting the Execute and Memory stages.                                   |
| `ex_stage.v`            | Manages the Execute (EX) pipeline stage, including ALU and branch evaluation.                |
| `hazard_detection.v`    | Detects data hazards and generates stall signals to prevent incorrect instruction execution.  |
| `id_ex.v`               | Pipeline register connecting the Instruction Decode and Execute stages.                       |
| `id_stage.v`            | Manages the Instruction Decode (ID) stage, including register reading and immediate generation. |
| `if_id.v`               | Pipeline register connecting the Instruction Fetch and Instruction Decode stages.             |
| `if_stage.v`            | Handles program counter update and instruction fetching from memory.                          |
| `instructions.mem`      | Contains the test program in hexadecimal for initializing instruction memory.                 |
| `mem_stage.v`           | Manages the Memory (MEM) stage, performing memory reads and writes.                          |
| `mem_wb.v`              | Pipeline register connecting the Memory and Write Back stages.                                |
| `memory.v`              | Implements instruction memory (ROM) and loads program from `instructions.mem`.                |
| `pipeline_tb.v`         | Testbench for simulating and verifying the processor design.                                 |
| `pipeline_tb.vvp`       | Simulation result output file generated by Icarus Verilog.                                   |
| `pipeline.v`            | Top-level module connecting all the pipeline stages and integrating the processor.            |
| `programcounter.v`      | Contains logic for updating and managing the Program Counter (PC).                           |
| `register.v`            | Implements the general-purpose register file (32 registers x 32 bits).                       |
| `waveform.vcd`          | Value Change Dump (VCD) file generated during simulation for waveform viewing.                |
| `wb_stage.v`            | Manages the Write Back (WB) stage, writing results to the register file.                      |

## **Pipeline Stages**

| **Stage** | **Purpose**                                                                       |
|-----------|-----------------------------------------------------------------------------------|
| IF        | Instruction fetch from program memory                                             |
| ID        | Instruction decode and register file read                                         |
| EX        | ALU operations and branch calculation                                             |
| MEM       | Data RAM access (loads/stores)                                                    |
| WB        | Write ALU/memory result back to register file                                     |

## **Testing & Simulation**

- **Testbench:** `pipeline_tb.v` runs a simulation and produces `waveform.vcd`.
- **Test Program:** `instructions.mem` is preloaded with ADDI, ADD, SUB, SLL, LW, SW, BEQ, etc.
- **Waveforms:** Open `waveform.vcd` in GTKWave to inspect the pipeline.

## **Supported Instructions Example**

_Sample from `instructions.mem`:_

```
00000013 // ADDI x0, x0, 0 (NOP)
00100093 // ADDI x1, x0, 1
00311233 // SLL x4, x2, x3
00940C63 // BEQ x8, x9, 24
00142403 // LW x8, 1(x8)
0014A023 // SW x1, 0(x9)
```
